<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>JGD QUALITY ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶∏</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#f2f6fb;padding:20px}
header{background:#0a4b9c;color:#fff;padding:20px;text-align:center}
section{margin-top:20px}
label{font-weight:bold}
select,input{padding:8px;margin:6px 0;width:100%}
button{padding:12px;margin-top:12px;border:none;border-radius:6px;cursor:pointer;width:100%}
.orderBtn{background:#25D366;color:#fff}
.adminBtn{background:#333;color:#fff}
#total{margin-top:10px;font-weight:bold;white-space:pre-line}
#adminPanel{display:none;background:#fff;padding:15px;border-radius:8px;margin-top:20px}
hr{margin:20px 0}
</style>
</head>
<body>

<header>
<h1>JGD QUALITY ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶∏</h1>
</header>

<!-- ================= CUSTOMER SECTION ================= -->
<section id="orderSection">
<label>Category</label>
<select id="category" onchange="loadProducts()">
<option value="">-- Select Category --</option>
</select>

<label>Product Size</label>
<select id="product" onchange="setPrice()">
<option value="">-- Select Size --</option>
</select>

<label>Price (‚Çπ)</label>
<input id="price" type="number" readonly>

<label>Quantity</label>
<input id="qty" type="number" min="1">

<div id="total">Subtotal: ‚Çπ0
GST: ‚Çπ0
Total: ‚Çπ0</div>

<button class="orderBtn" onclick="orderWhatsApp()">Order via WhatsApp</button>

<button class="adminBtn" onclick="openAdmin()">Admin Panel</button>
</section>

<!-- ================= ADMIN PANEL ================= -->
<section id="adminPanel">
<h3>üîê Admin Panel</h3>

<label>Category</label>
<select id="adminCat" onchange="loadAdminSizes()"></select>

<label>Size</label>
<select id="adminSize" onchange="loadAdminPrice()"></select>

<label>Price (‚Çπ)</label>
<input id="adminPrice" type="number">

<label>GST (%)</label>
<input id="adminGST" type="number">

<button class="adminBtn" onclick="saveAdminData()">Save</button>
<button onclick="closeAdmin()">Close Admin</button>
<p id="msg"></p>
</section>

<script>
/* ================= PRODUCT LIST ================= */
const PRODUCTS = {
  "UPVC PIPE": ['¬Ω"','¬æ"','1"','1.1/4"','1.1/2"','2"','2.1/2"','3"','4"','6"'],
  "SWR PIPE": ['2.1/2"','3"','4"','6"'],
  "GARDEN PIPE": ['¬Ω"','¬æ"','1"','1.25"'],
  "SECTION PIPE": ['1"','1.25"','2"','2.5"','3"']
};

const catEl = document.getElementById("category");
const prodEl = document.getElementById("product");
const priceEl = document.getElementById("price");
const qtyEl = document.getElementById("qty");

/* Load customer categories */
for(let c in PRODUCTS){
  let o=document.createElement("option");
  o.value=c;o.textContent=c;
  catEl.appendChild(o);
}

/* CUSTOMER FUNCTIONS */
function loadProducts(){
  prodEl.innerHTML='<option value="">-- Select Size --</option>';
  priceEl.value=""; qtyEl.value="";
  calculate();
  if(!catEl.value) return;
  PRODUCTS[catEl.value].forEach(s=>{
    let o=document.createElement("option");
    o.value=s;o.textContent=s;
    prodEl.appendChild(o);
  });
}

function setPrice(){
  if(catEl.value && prodEl.value){
    let key = catEl.value+"_"+prodEl.value;
    priceEl.value = localStorage.getItem(key) || 0;
  }
  calculate();
}

function calculate(){
  let price=parseFloat(priceEl.value)||0;
  let qty=parseInt(qtyEl.value)||0;
  let gst=parseFloat(localStorage.getItem("gst"))||18;

  let subtotal=price*qty;
  let gstAmt=subtotal*gst/100;
  let total=subtotal+gstAmt;

  document.getElementById("total").innerText=
`Subtotal: ‚Çπ${subtotal}
GST (${gst}%): ‚Çπ${gstAmt.toFixed(2)}
Total: ‚Çπ${total.toFixed(2)}`;

  return {subtotal,gstAmt,total};
}

qtyEl.addEventListener("input",calculate);

/* WHATSAPP ORDER */
function orderWhatsApp(){
  if(!catEl.value||!prodEl.value||!qtyEl.value||qtyEl.value<=0){
    alert("‡¶∏‡¶¨ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®");
    return;
  }
  const d=calculate();
  const msg=
`*NEW ORDER*
Company: JGD QUALITY INDUSTRIES

Category: ${catEl.value}
Size: ${prodEl.value}
Price: ‚Çπ${priceEl.value}
Quantity: ${qtyEl.value}

Subtotal: ‚Çπ${d.subtotal}
GST: ‚Çπ${d.gstAmt.toFixed(2)}
TOTAL: ‚Çπ${d.total.toFixed(2)}`;

  window.location.href=
  "https://api.whatsapp.com/send?phone=917003764905&text="+
  encodeURIComponent(msg);
}

/* ================= ADMIN ================= */
function openAdmin(){
  const pass = prompt("Enter Admin Password");
  if(pass!=="1234"){alert("Wrong Password");return;}
  document.getElementById("adminPanel").style.display="block";
  loadAdmin();
}

function closeAdmin(){
  document.getElementById("adminPanel").style.display="none";
}

const aCat=document.getElementById("adminCat");
const aSize=document.getElementById("adminSize");
const aPrice=document.getElementById("adminPrice");
const aGST=document.getElementById("adminGST");

function loadAdmin(){
  aCat.innerHTML="";
  for(let c in PRODUCTS){
    let o=document.createElement("option");
    o.value=c;o.textContent=c;
    aCat.appendChild(o);
  }
  loadAdminSizes();
}

function loadAdminSizes(){
  aSize.innerHTML="";
  PRODUCTS[aCat.value].forEach(s=>{
    let o=document.createElement("option");
    o.value=s;o.textContent=s;
    aSize.appendChild(o);
  });
  loadAdminPrice();
}

function loadAdminPrice(){
  let key=aCat.value+"_"+aSize.value;
  aPrice.value=localStorage.getItem(key)||"";
  aGST.value=localStorage.getItem("gst")||18;
}

function saveAdminData(){
  let key=aCat.value+"_"+aSize.value;
  localStorage.setItem(key,aPrice.value);
  localStorage.setItem("gst",aGST.value);
  document.getElementById("msg").innerText="‚úÖ Saved Successfully";
  setPrice(); // refresh customer price
}
</script>

</body>
</html>
