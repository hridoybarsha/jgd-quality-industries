<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JGD QUALITY INDUSTRIES</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#f2f6fb;}
header{background:#2b66e3;color:#fff;padding:30px;text-align:center;}
section{padding:20px;}
.products{display:flex;gap:15px;flex-wrap:wrap;justify-content:center;}
.box{background:#fff;padding:20px;border-radius:10px;width:220px;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.1);cursor:pointer;}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
th{background:#eee;}
input{padding:5px;width:70px;}
button{padding:6px 10px;cursor:pointer;}
.hidden{display:none;}
.admin-login,.admin{max-width:800px;margin:30px auto;background:#fff;padding:20px;border-radius:10px;}
</style>
</head>
<body>

<header>
<h1>JGD QUALITY INDUSTRIES</h1>
<p>Manufacturer of uPVC Pipe | Garden Pipe | Section Pipe | SWR Pipe</p>
</header>

<section>
<h2 style="text-align:center">Our Products</h2>
<div class="products">
<div class="box" onclick="showList('section')">Section Pipe</div>
<div class="box" onclick="showList('garden')">Garden Pipe</div>
<div class="box" onclick="showList('swr')">SWR Pipe</div>
</div>
</section>

<section id="productList" class="hidden">
<h2 id="productTitle">Product Price List</h2>
<table>
<thead>
<tr>
<th>Size</th>
<th>PN</th>
<th>Base Price</th>
<th>Quantity</th>
<th>Total Price</th>
<th>Action</th>
</tr>
</thead>
<tbody id="listBody"></tbody>
</table>
</section>

<div class="admin-login">
<h3>Admin Panel</h3>
<input id="adminPass" placeholder="Password">
<button onclick="unlockAdmin()">Unlock</button>
</div>

<section id="adminPanel" class="admin hidden">
<h3>GST (%)</h3>
<input id="GST_RATE" value="18">
<button onclick="saveGST()">Save GST</button>

<hr>

<h3>Set Product Prices</h3>
<div id="adminProducts"></div>
</section>

<script>
const WHATSAPP_NUMBER = "917003764905";
const PASS = "1234";

// Products: [Size, PN, storage_key]
const products = {
 section:[
  ["2.5\"", "PN6", "section_2.5_PN6"],
  ["3\"", "PN8", "section_3_PN8"]
 ],
 garden:[
  ["1\"", "PN4", "garden_1_PN4"],
  ["1.5\"", "PN6", "garden_1.5_PN6"]
 ],
 swr:[
  ["4\"", "PN8", "swr_4_PN8"]
 ]
};

// Show Product List
function showList(type){
 document.getElementById("productList").classList.remove("hidden");
 document.getElementById("productTitle").innerText = type.toUpperCase()+" PIPE PRICE LIST";
 const body = document.getElementById("listBody");
 body.innerHTML = "";
 const gst = Number(localStorage.getItem("GST")||18);

 products[type].forEach(p=>{
  const price = Number(localStorage.getItem(p[2])||0);
  const total = (price*(1+gst/100)).toFixed(2);
  body.innerHTML += `
  <tr>
   <td>${p[0]}</td>
   <td>${p[1]}</td>
   <td>₹${price}</td>
   <td><input type="number" min="1" value="1" id="qty_${p[2]}" onchange="calc('${p[2]}')"></td>
   <td id="total_${p[2]}">₹${total}</td>
   <td><button onclick="orderWhatsApp('${p[2]}','${p[0]} ${p[1]}')">Order on WhatsApp</button></td>
  </tr>`;
 });
}

// Calculate total for a product
function calc(id){
 const qty = Number(document.getElementById("qty_"+id).value);
 const price = Number(localStorage.getItem(id)||0);
 const gst = Number(localStorage.getItem("GST")||18);
 const total = price*qty*(1+gst/100);
 document.getElementById("total_"+id).innerText = "₹"+total.toFixed(2);
}

// WhatsApp pre-filled order
function orderWhatsApp(id,name){
 const qty = Number(document.getElementById("qty_"+id).value);
 const price = Number(localStorage.getItem(id)||0);
 const gst = Number(localStorage.getItem("GST")||18);
 const total = (price*qty*(1+gst/100)).toFixed(2);

 const msg = `*JGD QUALITY INDUSTRIES Order*\n\nProduct: ${name}\nQuantity: ${qty}\nPrice per unit: ₹${price}\nGST: ${gst}%\nTotal Amount: ₹${total}`;

 const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
 window.open(url,"_blank");
}

// Admin Functions
function unlockAdmin(){
 if(document.getElementById("adminPass").value===PASS){
  document.getElementById("adminPanel").classList.remove("hidden");
  loadAdminProducts();
 }else alert("Wrong Password");
}

function savePrice(id){
 localStorage.setItem(id,document.getElementById(id).value);
 alert("Price Saved");
 showList('section'); // Update list if open
}

function saveGST(){
 localStorage.setItem("GST",document.getElementById("GST_RATE").value);
 alert("GST Saved");
}

// Load products in admin panel
function loadAdminProducts(){
 const container = document.getElementById("adminProducts");
 container.innerHTML = "";
 for(const type in products){
  products[type].forEach(p=>{
   const price = localStorage.getItem(p[2])||0;
   container.innerHTML += `${p[0]} ${p[1]} ₹ <input id="${p[2]}" value="${price}"> <button onclick="savePrice('${p[2]}')">Save</button><br><br>`;
  });
 }
}

// Initialize
window.onload=()=>{
 document.getElementById("GST_RATE").value=localStorage.getItem("GST")||18;
 for(const type in products){
  products[type].forEach(p=>{
   if(localStorage.getItem(p[2])) document.getElementById(p[2])?.setAttribute('value',localStorage.getItem(p[2]));
  });
 }
}
</script>

</body>
</html>
