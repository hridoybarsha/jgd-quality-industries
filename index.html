<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JGD QUALITY Industries</title>

<!-- ================= CSS ================= -->
<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f4f7;
  margin: 0;
  padding: 0;
}

/* HEADER */
.header {
  background: #0d47a1;
  color: #fff;
  padding: 18px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
}

/* CARD */
.card {
  background: #fff;
  margin: 15px;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

label {
  font-weight: bold;
  display: block;
  margin-top: 10px;
}

select, input {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 16px;
}

/* BUTTON */
.order-btn {
  margin-top: 15px;
  width: 100%;
  padding: 12px;
  background: #25d366;
  border: none;
  border-radius: 8px;
  font-size: 18px;
  color: white;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.order-btn:active {
  transform: scale(0.98);
}

/* TOTAL */
.total-box {
  margin-top: 10px;
  font-size: 16px;
}

/* LOADER */
#loader {
  position: fixed;
  inset: 0;
  background: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.spinner {
  width: 45px;
  height: 45px;
  border: 4px solid #ddd;
  border-top: 4px solid #0d47a1;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  100% { transform: rotate(360deg); }
}

/* ANIMATION */
.fade-in {
  animation: fade 0.4s ease-in-out;
}
@keyframes fade {
  from {opacity: 0; transform: translateY(6px);}
  to {opacity: 1; transform: translateY(0);}
}

.price-animate {
  animation: pop 0.3s ease;
}
@keyframes pop {
  50% {transform: scale(1.1);}
}
</style>
</head>

<body>

<!-- ================= LOADER ================= -->
<div id="loader">
  <div class="spinner"></div>
  <p>Loading...</p>
</div>

<!-- ================= HEADER ================= -->
<div class="header">
  JGD QUALITY ইন্ডাস্ট্রিজ
</div>

<!-- ================= USER ORDER ================= -->
<div class="card">
  <h3>User Order</h3>

  <label>Category</label>
  <select id="category">
    <option value="" disabled selected>Section</option>
  </select>

  <label>Type</label>
  <select id="type">
    <option value="" disabled selected>Type Section</option>
  </select>

  <label>Size</label>
  <select id="size">
    <option value="" disabled selected>Select Size</option>
  </select>

  <label>Price (₹)</label>
  <input type="number" id="price" readonly>

  <label>Quantity</label>
  <input type="number" id="qty" value="1" min="1">

  <div class="total-box">
    Subtotal: ₹<span id="subtotal">0</span><br>
    GST: ₹<span id="gst">0</span><br>
    <b>Total: ₹<span id="total">0</span></b>
  </div>

  <button class="order-btn" onclick="orderNow()">Order via WhatsApp</button>
</div>

<!-- ================= JS ================= -->
<script>
/* PAGE LOAD */
window.addEventListener("load", () => {
  document.getElementById("loader").style.display = "none";
});

/* DEMO DATA (Firebase আসবে এখানে) */
const products = [
  {category:"GARDEN PIPE", type:"OP", size:"1/2", price:100},
  {category:"GARDEN PIPE", type:"TP", size:"3/4", price:120},
  {category:"WATER LEVEL PIPE", type:"OP", size:"1/2", price:80}
];

/* LOAD CATEGORY */
function loadCategory(){
  const cat = document.getElementById("category");
  cat.innerHTML = '<option value="" disabled selected>Section</option>';
  [...new Set(products.map(p=>p.category))].forEach(c=>{
    cat.innerHTML += `<option>${c}</option>`;
  });
}
loadCategory();

/* CATEGORY CHANGE */
category.onchange = () => {
  type.innerHTML='<option disabled selected>Type Section</option>';
  size.innerHTML='<option disabled selected>Select Size</option>';
  products.filter(p=>p.category===category.value)
    .map(p=>p.type)
    .filter((v,i,a)=>a.indexOf(v)===i)
    .forEach(t=>{
      type.innerHTML+=`<option>${t}</option>`;
    });
  animate("type");
};

/* TYPE CHANGE */
type.onchange = () => {
  size.innerHTML='<option disabled selected>Select Size</option>';
  products.filter(p=>p.category===category.value && p.type===type.value)
    .forEach(s=>{
      size.innerHTML+=`<option>${s.size}</option>`;
    });
  animate("size");
};

/* SIZE CHANGE */
size.onchange = () => {
  const p = products.find(p=>p.category===category.value && p.type===type.value && p.size===size.value);
  price.value = p.price;
  calc();
};

/* CALCULATION */
qty.oninput = calc;
function calc(){
  let sub = price.value * qty.value;
  let gst = Math.round(sub * 0.18);
  let total = sub + gst;
  subtotal.innerText=sub;
  gstSpan.innerText=gst;
  totalSpan.innerText=total;
  animatePrice("total");
}

/* ANIMATIONS */
function animate(id){
  const e=document.getElementById(id);
  e.classList.remove("fade-in");
  void e.offsetWidth;
  e.classList.add("fade-in");
}
function animatePrice(id){
  const e=document.getElementById(id);
  e.classList.remove("price-animate");
  void e.offsetWidth;
  e.classList.add("price-animate");
}

/* WHATSAPP */
function orderNow(){
  alert("WhatsApp order ready (next step)");
}

/* FIX ID */
const gstSpan=document.getElementById("gst");
const totalSpan=document.getElementById("total");
</script>

</body>
</html>
